#23456789012  123  123456789-123456789-123456789-12345  123456789-123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)=====  ========================(arguments)===================================  ==(test)==  ==========================(results)===================================  t  ========(var)======= 
PREP          v21  include the prototype headers                               
   incl       v21  include main header                  yFONT.h              
   incl       v21  include private header               yFONT_priv.h         

## maintenance macros
##    reformat SCRP lines         0wi     lli v20 llfhhhhhhhdw$i                                            $A ----------  ----------------------------------------------------------------------  -  -------------------- 0
##    reformat COND lines         0i   fi   v20 $hhhhhhdw$A ----------------------------------------------------------------------  ----------  ----------------------------------------------------------------------  -  -------------------- 0j
##    reformat exec lines         0i   fi   v20 llfhhdwllfhhhhhdwllfi               llfi llfi               $A -                       0j
##    reformat code lines         0i   fi   v20 llfhhdw$A                                                                                                                                                                                                                                   -                       246|dw0j


#23456789-12  123  123456789-123456789-123456789-12345  123456789-123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)=====  ========================(arguments)===================================  ==(test)==  ==========================(results)===================================  t  ========(var)======= 
SCRP          v21  verify font slot finding                                     yFONT__slot_next                                                        ----------  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       v21  prepare for run                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  prepare for testing                  yFONT__testquiet                                                                              i_equal     0                                                                      

   COND       v21  find first slot                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  check next slot                      yFONT__slot_next                                                                              i_equal     0                                                                      
     code     v21  force fill stot for testing          - - - - - - - - - -   g_font [0] = 0x00000001;                                                                                                                                       

   COND       v21  find second slot                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  check next slot                      yFONT__slot_next                                                                              i_equal     1                                                                      
     code     v21  force fill stot for testing          - - - - - - - - - -   g_font [1] = 0x00000001;                                                                                                                                       

   COND       v21  find third slot                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  check next slot                      yFONT__slot_next                                                                              i_equal     2                                                                      
     code     v21  force fill stot for testing          - - - - - - - - - -   g_font [2] = 0x00000001;                                                                                                                                       

   COND       v21  find second slot, again                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  check next slot                      yFONT__slot_next                                                                              i_equal     3                                                                      
     code     v21  clear out second slot                - - - - - - - - - -   g_font [1] = 0x00000000;                                                                                                                                       
     exec     v21  check next slot                      yFONT__slot_next                                                                              i_equal     1                                                                      

   COND       v21  fill up slots                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [0] = 0x00000001;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [1] = 0x00000001;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [2] = 0x00000001;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [3] = 0x00000001;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [4] = 0x00000001;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [5] = 0x00000001;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [6] = 0x00000001;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [7] = 0x00000001;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [8] = 0x00000001;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [9] = 0x00000001;                                                                                                                                       
     exec     v21  check next slot                      yFONT__slot_next                                                                              i_lesser    0                                                                      

   COND       v21  find fifth slot                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [4] = 0x00000000;                                                                                                                                       
     exec     v21  check next slot                      yFONT__slot_next                                                                              i_equal     4                                                                      

   COND       v21  unfill all slots                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [0] = 0x00000000;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [1] = 0x00000000;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [2] = 0x00000000;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [3] = 0x00000000;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [4] = 0x00000000;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [5] = 0x00000000;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [6] = 0x00000000;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [7] = 0x00000000;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [8] = 0x00000000;                                                                                                                                       
     code     v21  force fill slot for testing          - - - - - - - - - -   g_font [9] = 0x00000000;                                                                                                                                       

   COND       v21  end the test                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  prepare for testing                  yFONT__testend                                                                                i_equal     0                                                                      


#23456789-12  123  123456789-123456789-123456789-12345  123456789-123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)=====  ========================(arguments)===================================  ==(test)==  ==========================(results)===================================  t  ========(var)======= 
SCRP          v21  verify font allocating and freeing                           yFONT__slot_new, yFONT__slot_free, yFONT__slot_purge                    ----------  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       v21  prepare for run                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  prepare for testing                  yFONT__testquiet                                                                              i_equal     0                                                                      
     exec     v21  clear all fonts                      yFONT__slot_purge                                                                             i_equal     0                                                                      

   COND       v21  allocate first                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     0                                                                      

   COND       v21  allocate second                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     1                                                                      

   COND       v21  allocate third                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     2                                                                      

   COND       v21  clear and allocate second again                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  free an existing font                yFONT__slot_free      1                                                                       i_equal     0                                                                      
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     1                                                                      

   COND       v21  allocate to fill all slots                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     3                                                                      
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     4                                                                      
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     5                                                                      
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     6                                                                      
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     7                                                                      
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     8                                                                      
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     9                                                                      

   COND       v21  try to allocate too many                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_lesser    0                                                                      

   COND       v21  clear all font slots                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  clear all fonts                      yFONT__slot_purge                                                                             i_equal     0                                                                      

   COND       v21  allocate first                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     0                                                                      

   COND       v21  try to reallocate an existing one                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  allocate new font                    yFONT__slot_alloc     0                                                                       i_lesser    0                                                                      

   COND       v21  end the test                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  clear all fonts                      yFONT__slot_purge                                                                             i_equal     0                                                                      
     exec     v21  prepare for testing                  yFONT__testend                                                                                i_equal     0                                                                      


#23456789-12  123  123456789-123456789-123456789-12345  123456789-123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ver  ===========(description)===========  =====(function)=====  ========================(arguments)===================================  ==(test)==  ==========================(results)===================================  t  ========(var)======= 
SCRP          v21  verify reading and writing headers                           yFONT__file_open,yFONT__file_close,yFONT__head_write,yFONT__head_read   ----------  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       v21  prepare for run                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  prepare for testing                  yFONT__testquiet                                                                              i_equal     0                                                                      
     exec     v21  clear all fonts                      yFONT__slot_purge                                                                             i_equal     0                                                                      

   COND       v21  look before font allocated                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      v21  review name                          yFONT__unit           "font_name"    , 0                                                      s_equal     yFONT font name  : no font assigned                                    
     get      v21  review chars                         yFONT__unit           "font_chars"   , 0                                                      s_equal     yFONT chars      : no font assigned                                    
     get      v21  review tex size                      yFONT__unit           "tex_size"     , 0                                                      s_equal     yFONT tex size   : no font assigned                                    
     get      v21  review char limits                   yFONT__unit           "char_limits"  , 0                                                      s_equal     yFONT char limit : no font assigned                                    

   COND       v21  allocate font                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     0                                                                      
     get      v21  review name                          yFONT__unit           "font_name"    , 0                                                      s_equal     yFONT font name  :  0:                                                 
     get      v21  review chars                         yFONT__unit           "font_chars"   , 0                                                      s_equal     yFONT chars      : point= 0, format=-, style=-                         
     get      v21  review tex size                      yFONT__unit           "tex_size"     , 0                                                      s_equal     yFONT tex size   : width =   0, height=   0                            
     get      v21  review char limits                   yFONT__unit           "char_limits"  , 0                                                      s_equal     yFONT char limit : mascent =  0, mdescent=  0, margin  =  0            

   COND       v21  force data into structure                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  set the name                         yFONT__head_name      0              , "yUNIT_testing"                                        i_equal     0                                                                      
     exec     v21  set the characteristics              yFONT__head_chars     0              ,    10,   'l',   'u'                                        i_equal     0                                                                      
     exec     v21  set the tex size                     yFONT__head_tex       0              ,  1000,   200                                             i_equal     0                                                                      
     exec     v21  set the placements                   yFONT__head_place     0              ,     5,    -3,     2                                     i_equal     0                                                                      
     get      v21  review name                          yFONT__unit           "font_name"    , 0                                                      s_equal     yFONT font name  : 13:yUNIT_testing                                    
     get      v21  review chars                         yFONT__unit           "font_chars"   , 0                                                      s_equal     yFONT chars      : point=10, format=l, style=u                         
     get      v21  review tex size                      yFONT__unit           "tex_size"     , 0                                                      s_equal     yFONT tex size   : width =1000, height= 200                            
     get      v21  review char limits                   yFONT__unit           "char_limits"  , 0                                                      s_equal     yFONT char limit : mascent =  5, mdescent= -3, margin  =  2            

   COND       v21  open file and write header                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  open the file                        yFONT__file_open      0              , 'w'                                                    i_equal     0                                                                      
     exec     v21  write header                         yFONT__head_write     0                                                                       i_equal     0                                                                      
     exec     v21  close the file                       yFONT__file_close     0                                                                       i_equal     0                                                                      

   COND       v21  free the font                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  free an existing font                yFONT__slot_free      0                                                                       i_equal     0                                                                      
     get      v21  review name                          yFONT__unit           "font_name"    , 0                                                      s_equal     yFONT font name  : no font assigned                                    
     get      v21  review chars                         yFONT__unit           "font_chars"   , 0                                                      s_equal     yFONT chars      : no font assigned                                    
     get      v21  review tex size                      yFONT__unit           "tex_size"     , 0                                                      s_equal     yFONT tex size   : no font assigned                                    
     get      v21  review char limits                   yFONT__unit           "char_limits"  , 0                                                      s_equal     yFONT char limit : no font assigned                                    

   COND       v21  allocate font                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  allocate new font                    yFONT__slot_new                                                                               i_equal     0                                                                      
     get      v21  review name                          yFONT__unit           "font_name"    , 0                                                      s_equal     yFONT font name  :  0:                                                 
     get      v21  review chars                         yFONT__unit           "font_chars"   , 0                                                      s_equal     yFONT chars      : point= 0, format=-, style=-                         
     get      v21  review tex size                      yFONT__unit           "tex_size"     , 0                                                      s_equal     yFONT tex size   : width =   0, height=   0                            
     get      v21  review char limits                   yFONT__unit           "char_limits"  , 0                                                      s_equal     yFONT char limit : mascent =  0, mdescent=  0, margin  =  0            

   COND       v21  open file and read header                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  set the name                         yFONT__head_name      0              , "yUNIT_testing"                                        i_equal     0                                                                      
     exec     v21  open the file                        yFONT__file_open      0              , 'r'                                                    i_equal     0                                                                      
     exec     v21  read header                          yFONT__head_read      0                                                                       i_equal     0                                                                      
     exec     v21  close the file                       yFONT__file_close     0                                                                       i_equal     0                                                                      
     get      v21  review name                          yFONT__unit           "font_name"    , 0                                                      s_equal     yFONT font name  : 13:yUNIT_testing                                    
     get      v21  review chars                         yFONT__unit           "font_chars"   , 0                                                      s_equal     yFONT chars      : point=10, format=l, style=u                         
     get      v21  review tex size                      yFONT__unit           "tex_size"     , 0                                                      s_equal     yFONT tex size   : width =1000, height= 200                            
     get      v21  review char limits                   yFONT__unit           "char_limits"  , 0                                                      s_equal     yFONT char limit : mascent =  5, mdescent= -3, margin  =  2            
     exec     v21  show header                          yFONT__head_entry     0                                                                       i_equal     0                                                                      

   COND       v21  end the test                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     v21  clear all fonts                      yFONT__slot_purge                                                                             i_equal     0                                                                      
     exec     v21  prepare for testing                  yFONT__testend                                                                                i_equal     0                                                                      


